<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Injury Management</title>
    <link rel="stylesheet" href="/common/css/bootstrap.min.css">
    <link rel="stylesheet" href="/common/css/nav.css" />
    <link rel="stylesheet" href="/common/css/injury.css" />
</head>
<body>

    <!-- 네비게이션 바 (헤더와 사이드바 포함) -->
    <th:block th:replace="user/nav :: nav"></th:block>

    <!-- 메인 컨텐츠 컨테이너 -->
    <div class="main-content-container">
        <!-- 부상 관리 테이블 -->
        <div class="table-container">
            <h2 class="section-title">부상 리스트</h2>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>등록번호</th>
                        <th>선수명</th>
                        <th>부상 일시</th>
                        <th>상세보기</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="injury : ${injuries}">
                        <td th:text="${injury.injury_idx}"></td>
                        <td th:text="${injury.person_idx}"></td>
                        <td th:text="${injury.broken_date}"></td>
                        <td>
                            <button class="btn btn-info btn-sm"
                                    th:data-id="${injury.injury_idx}"
                                    onclick="viewInjuryDetails(this)">보기</button>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- 검색 및 페이지네이션 영역 -->
            <div class="table-controls d-flex justify-content-between align-items-center">
                <div class="search-box d-flex">
                    <!-- 검색 필드 선택 -->
                    <select class="form-select me-2" id="searchField">
                        <option value="name">이름</option>
                        <option value="position">포지션</option>
                    </select>
                    <!-- 입력 필드 -->
                    <input type="text" class="form-control me-2" placeholder="검색어 입력"
                           id="searchInput">
                    <!-- 검색 버튼 -->
                    <button class="btn btn-primary">검색</button>
                </div>

                <!-- 추가 버튼 -->
                <button class="btn btn-success" onclick="showAddForm()">추가</button>
            </div>
        </div>

        <!-- 선수 정보와 부상 수정 폼을 포함하는 컨테이너 -->
        <div class="info-and-form-container">
            <!-- 선수 정보 컨테이너 (읽기 전용) -->
            <div class="injury-form-container player-info-container">
                <h2 class="section-title">선수 정보</h2>
                <table class="player-info-table">
                    <tr>
                        <td>등번호</td>
                        <td id="playerNumber">10</td>
                    </tr>
                    <tr>
                        <td>이름</td>
                        <td id="playerName">홍길동</td>
                    </tr>
                    <tr>
                        <td>포지션</td>
                        <td id="playerPosition">공격수</td>
                    </tr>
                    <tr>
                        <td>키</td>
                        <td id="playerHeight">180cm</td>
                    </tr>
                    <tr>
                        <td>몸무게</td>
                        <td id="playerWeight">75kg</td>
                    </tr>
                </table>
            </div>

            <!-- 부상 정보 수정 폼 컨테이너 -->
            <div class="injury-form-container">
                <h3 class="section-title">부상 정보 수정</h3>
                <div class="form-group">
                    <label>부상 일시:</label> 
                    <input type="text" class="form-control" id="editInjuryDate">
                </div>
                <div class="form-group">
                    <label>부상 부위:</label> 
                    <input type="text" class="form-control" id="editInjuryPart">
                </div>
                <div class="form-group">
                    <label>심각도:</label>
                    <div class="radio-group">
                        <label><input type="radio" name="editSeverity" value="상" id="editSeverityHigh"> 상</label> 
                        <label><input type="radio" name="editSeverity" value="중" id="editSeverityMedium"> 중</label> 
                        <label><input type="radio" name="editSeverity" value="하" id="editSeverityLow"> 하</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>주치의:</label> 
                    <input type="text" class="form-control" id="editDoctor">
                </div>
                <div class="form-group">
                    <label>관련 메모:</label>
                    <textarea class="form-control" id="editMemo"></textarea>
                </div>
                <div class="form-group">
                    <label>회복 기간 (일):</label> 
                    <input type="number" class="form-control" id="editRecoveryPeriod">
                </div>
                <div class="btn-container">
                    <button class="btn btn-secondary" onclick="cancelForm()">취소</button>
                    <button class="btn btn-primary" onclick="saveInjuryDetails()">저장</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/common/js/jquery.min.js"></script>
    <script src="/common/js/bootstrap.bundle.min.js"></script>
    <script src="/common/js/injury.js"></script>
    <script>
        function showAddForm() {
            $('#editInjuryDate').val('');
            $('#editInjuryPart').val('');
            $('input[name="editSeverity"]').prop('checked', false);
            $('#editDoctor').val('');
            $('#editMemo').val('');
            $('#editRecoveryPeriod').val('');
        }

        function cancelForm() {
            alert('폼이 초기화됩니다.');
        }

        function saveInjuryDetails() {
            alert('부상 세부 사항이 저장되었습니다.');
        }

        function viewInjuryDetails(button) {
            const injuryId = $(button).data('id');
            alert(`부상 상세 정보 (ID: ${injuryId})를 로드합니다.`);
        }
    </script>
</body>
</html>
